<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>QuickPress Admin Panel</title>

<style>
body{margin:0;font-family:Arial;background:#f4f4f4}
.navbar{
  background:#FFD400;
  padding:14px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  font-weight:900;
}
.nav-links a{margin:0 10px;cursor:pointer}
.container{padding:16px}

/* cards */
.cards{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
  gap:16px;
}
.card{
  background:#fff;
  padding:16px;
  border-radius:14px;
  box-shadow:0 4px 10px rgba(0,0,0,.1);
}
.section{display:none}
.section.active{display:block}

.table{
  background:#fff;
  border-radius:12px;
  padding:12px;
}
.row{
  display:flex;
  justify-content:space-between;
  padding:8px 0;
  border-bottom:1px solid #eee;
}
button{
  padding:6px 12px;
  border:none;
  border-radius:8px;
  font-weight:800;
  cursor:pointer;
}
.approve{background:#27ae60;color:#fff}
.reject{background:#e74c3c;color:#fff}
</style>

<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import {
  getFirestore, collection, getDocs,
  doc, updateDoc, addDoc
} from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyAWTOu3JBhg3JuZg6snAxhnf_XFhLhLkbc",
  authDomain: "quickpress-web.firebaseapp.com",
  projectId: "quickpress-web",
  storageBucket: "quickpress-web.firebasestorage.app",
  messagingSenderId: "909067547966",
  appId: "1:909067547966:web:fda5e47e1e58ca7ae7a86f"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

/* ===== LOAD DELIVERY BOYS ===== */
async function loadDeliveryBoys(){
  const box = document.getElementById("deliveryList");
  box.innerHTML = "Loading...";
  const snap = await getDocs(collection(db,"delivery_boys"));
  box.innerHTML = "";

  snap.forEach(d=>{
    const boy = d.data();
    box.innerHTML += `
      <div class="row">
        <div>
          <b>${boy.name || "No Name"}</b><br>
          ${boy.phone || ""}
          <br>Status: <b>${boy.status}</b>
        </div>
        <div>
          ${
            boy.status==="pending" ?
            `<button class="approve" onclick="approve('${d.id}')">Approve</button>
             <button class="reject" onclick="reject('${d.id}')">Reject</button>`
            : boy.status
          }
        </div>
      </div>
    `;
  });
}

window.approve = async function(id){
  await updateDoc(doc(db,"delivery_boys",id),{status:"approved"});
  alert("Delivery boy approved");
  loadDeliveryBoys();
};

window.reject = async function(id){
  await updateDoc(doc(db,"delivery_boys",id),{status:"rejected"});
  alert("Delivery boy rejected");
  loadDeliveryBoys();
};

window.onload = loadDeliveryBoys;
</script>

</head>

<body>

<!-- NAVBAR -->
<div class="navbar">
  <div>QuickPress Admin</div>
  <div class="nav-links">
    <a onclick="show('dashboard')">Dashboard</a>
    <a onclick="show('delivery')">Delivery Boys</a>
  </div>
</div>

<div class="container">

<!-- DASHBOARD -->
<div id="dashboard" class="section active">
  <h2>Dashboard</h2>
  <p>Welcome to Admin Panel</p>
</div>

<!-- DELIVERY BOYS -->
<div id="delivery" class="section">
  <h2>Delivery Boy Approvals</h2>
  <div class="table" id="deliveryList"></div>
</div>

</div>

<script>
function show(id){
  document.querySelectorAll(".section")
    .forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}
</script>

</body>
</html>
