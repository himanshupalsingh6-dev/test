<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>QuickPress Admin Panel</title>

<style>
body{
  font-family:Arial;
  background:#f5f5f5;
  margin:0;
}
.header{
  background:#FFD400;
  padding:14px;
  font-size:22px;
  font-weight:900;
  text-align:center;
}
.order{
  background:#fff;
  margin:12px;
  padding:12px;
  border-radius:12px;
  box-shadow:0 4px 10px rgba(0,0,0,.1);
}
.order h3{
  margin:0 0 6px;
}
.items{
  font-size:14px;
  color:#333;
}
.status{
  margin-top:6px;
  font-weight:800;
  color:green;
}
.total{
  font-weight:900;
  margin-top:6px;
}
.time{
  font-size:12px;
  color:#666;
}
</style>

<!-- ðŸ”¥ FIREBASE -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
  import { getFirestore, collection, getDocs, query, orderBy }
  from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAWTOu3JBhg3JuZg6snAxhnf_XFhLhLkbc",
    authDomain: "quickpress-web.firebaseapp.com",
    projectId: "quickpress-web",
    storageBucket: "quickpress-web.firebasestorage.app",
    messagingSenderId: "909067547966",
    appId: "1:909067547966:web:fda5e47e1e58ca7ae7a86f"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  async function loadOrders(){
    const box = document.getElementById("orders");
    box.innerHTML = "Loading orders...";

    const q = query(
      collection(db,"orders"),
      orderBy("createdAt","desc")
    );

    const snap = await getDocs(q);
    box.innerHTML = "";

    snap.forEach(doc=>{
      const o = doc.data();

      let itemsHtml = "";
      o.items.forEach(i=>{
        itemsHtml += `${i.name} Ã— ${i.qty}<br>`;
      });

      box.innerHTML += `
        <div class="order">
          <h3>Order ID: ${doc.id}</h3>
          <div class="items">${itemsHtml}</div>
          <div class="total">Total: â‚¹${o.grandTotal}</div>
          <div class="status">Status: ${o.status}</div>
          <div class="time">
            ${o.createdAt?.toDate().toLocaleString() || ""}
          </div>
        </div>
      `;
    });
  }

  window.onload = loadOrders;
</script>

</head>

<body>

<div class="header">QuickPress â€“ Admin Panel</div>

<div id="orders"></div>

</body>
</html>
