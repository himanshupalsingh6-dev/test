<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>QuickPress Admin Panel</title>

<style>
body{margin:0;font-family:Arial;background:#f4f4f4}
.navbar{
  background:#FFD400;
  padding:14px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  font-weight:900;
}
.nav-links a{
  margin:0 10px;
  cursor:pointer;
}
.container{padding:16px}
.section{display:none}
.section.active{display:block}

/* dashboard cards */
.cards{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
  gap:16px;
}
.card{
  background:#fff;
  padding:16px;
  border-radius:14px;
  box-shadow:0 4px 10px rgba(0,0,0,.1);
  text-align:center;
}
.card h2{margin:0}

/* delivery */
.form{
  background:#fff;
  padding:16px;
  border-radius:14px;
  margin-bottom:16px;
}
input{
  width:100%;
  padding:10px;
  margin:6px 0;
  border-radius:8px;
  border:1px solid #ccc;
}
button{
  padding:8px 14px;
  border:none;
  border-radius:8px;
  font-weight:800;
  cursor:pointer;
}
.add{background:#27ae60;color:#fff}
.approve{background:#2ecc71;color:#fff}
.reject{background:#e74c3c;color:#fff}
.row{
  background:#fff;
  padding:12px;
  border-radius:10px;
  margin-bottom:8px;
  display:flex;
  justify-content:space-between;
}
</style>

<!-- ðŸ”¥ FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import {
  getFirestore, collection, getDocs, addDoc,
  updateDoc, doc
} from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyAWTOu3JBhg3JuZg6snAxhnf_XFhLhLkbc",
  authDomain: "quickpress-web.firebaseapp.com",
  projectId: "quickpress-web",
  storageBucket: "quickpress-web.firebasestorage.app",
  messagingSenderId: "909067547966",
  appId: "1:909067547966:web:fda5e47e1e58ca7ae7a86f"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

/* ===== DASHBOARD ===== */
async function loadDashboard(){
  const snap = await getDocs(collection(db,"delivery_boys"));
  let total=0, approved=0, pending=0, rejected=0;
  snap.forEach(d=>{
    total++;
    const s=d.data().status;
    if(s==="approved") approved++;
    if(s==="pending") pending++;
    if(s==="rejected") rejected++;
  });
  totalEl.innerText=total;
  approvedEl.innerText=approved;
  pendingEl.innerText=pending;
  rejectedEl.innerText=rejected;
}

/* ===== DELIVERY BOYS ===== */
window.addDeliveryBoy = async function(){
  const name=nameInput.value.trim();
  const phone=phoneInput.value.trim();
  if(!name||!phone){alert("Fill all fields");return;}

  await addDoc(collection(db,"delivery_boys"),{
    name,phone,status:"pending",createdAt:Date.now()
  });
  nameInput.value="";phoneInput.value="";
  loadDashboard();loadDeliveryList();
};

async function loadDeliveryList(){
  list.innerHTML="";
  const snap=await getDocs(collection(db,"delivery_boys"));
  snap.forEach(d=>{
    const b=d.data();
    list.innerHTML+=`
      <div class="row">
        <div>
          <b>${b.name}</b><br>${b.phone}<br>Status: <b>${b.status}</b>
        </div>
        <div>
          ${
            b.status==="pending"?
            `<button class="approve" onclick="approve('${d.id}')">Approve</button>
             <button class="reject" onclick="reject('${d.id}')">Reject</button>`
            :""
          }
        </div>
      </div>`;
  });
}
window.approve=async(id)=>{await updateDoc(doc(db,"delivery_boys",id),{status:"approved"});loadDashboard();loadDeliveryList();}
window.reject=async(id)=>{await updateDoc(doc(db,"delivery_boys",id),{status:"rejected"});loadDashboard();loadDeliveryList();}

window.onload=()=>{loadDashboard();loadDeliveryList();}
</script>
</head>

<body>

<!-- NAVBAR -->
<div class="navbar">
  <div>QuickPress Admin</div>
  <div class="nav-links">
    <a onclick="show('dashboard')">Dashboard</a>
    <a onclick="show('orders')">Orders</a>
    <a onclick="show('delivery')">Delivery Boys</a>
    <a onclick="show('partners')">Partners</a>
    <a onclick="show('products')">Products</a>
    <a onclick="show('wallet')">Wallet</a>
  </div>
</div>

<div class="container">

<!-- DASHBOARD -->
<div id="dashboard" class="section active">
  <h2>Dashboard</h2>
  <div class="cards">
    <div class="card"><h2 id="totalEl">0</h2>Total Delivery</div>
    <div class="card"><h2 id="approvedEl">0</h2>Approved</div>
    <div class="card"><h2 id="pendingEl">0</h2>Pending</div>
    <div class="card"><h2 id="rejectedEl">0</h2>Rejected</div>
  </div>
</div>

<!-- ORDERS -->
<div id="orders" class="section">
  <h2>Orders</h2>
  <p>(Next step: full order management)</p>
</div>

<!-- DELIVERY -->
<div id="delivery" class="section">
  <h2>Delivery Boys</h2>
  <div class="form">
    <input id="nameInput" placeholder="Name">
    <input id="phoneInput" placeholder="Phone">
    <button class="add" onclick="addDeliveryBoy()">Add Delivery Boy</button>
  </div>
  <div id="list"></div>
</div>

<!-- PARTNERS -->
<div id="partners" class="section">
  <h2>Partners</h2>
  <p>(Partner approval panel coming next)</p>
</div>

<!-- PRODUCTS -->
<div id="products" class="section">
  <h2>Products</h2>
  <p>(Add / edit product & price)</p>
</div>

<!-- WALLET -->
<div id="wallet" class="section">
  <h2>Wallet</h2>
  <p>(Admin controlled wallet system)</p>
</div>

</div>

<script>
function show(id){
  document.querySelectorAll(".section")
    .forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}
</script>

</body>
</html>
