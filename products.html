<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Products – QuickPress</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- PRODUCTS DATA -->
<script src="products.js"></script>

<style>
:root{
  --yellow:#FFD400;
  --black:#111;
  --bg:#f6f7f9;
  --card:#fff;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
  background:var(--bg);
}

/* NAVBAR */
.nav{
  position:sticky;top:0;z-index:10;
  background:#fff;
  display:flex;justify-content:space-between;align-items:center;
  padding:12px 14px;
  box-shadow:0 2px 8px rgba(0,0,0,.1);
}
.nav button{
  border:none;background:#000;color:#fff;
  padding:6px 12px;border-radius:20px;
}
.cart{
  background:var(--yellow);
  padding:6px 14px;border-radius:20px;
  font-weight:900;
}

/* CATEGORY SLIDER */
.cat-wrap{
  display:flex;gap:10px;overflow-x:auto;
  padding:12px;background:#fff;
}
.cat{
  padding:10px 16px;
  border-radius:20px;
  background:#eee;
  font-weight:800;
  cursor:pointer;
  white-space:nowrap;
}
.cat.active{
  background:var(--yellow);
}

/* PRODUCTS GRID */
.products{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:12px;
  padding:12px;
}
.card{
  background:#fff;
  border-radius:18px;
  padding:14px;
  box-shadow:0 6px 14px rgba(0,0,0,.1);
  animation:fade .25s ease;
}
@keyframes fade{
  from{opacity:0;transform:translateY(6px)}
  to{opacity:1}
}
.icon{
  font-size:44px;
  text-align:center;
}
.name{
  font-weight:900;
  margin-top:6px;
  text-align:center;
}
.price{
  text-align:center;
  font-weight:800;
  margin-top:2px;
}
.add{
  margin-top:10px;
  width:100%;
  padding:10px;
  border:none;
  background:var(--yellow);
  border-radius:14px;
  font-weight:900;
}
.qty{
  margin-top:10px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  background:#f1f1f1;
  border-radius:14px;
  padding:6px 12px;
}
.qty button{
  border:none;
  background:#000;
  color:#fff;
  width:30px;
  height:30px;
  border-radius:50%;
  font-size:16px;
}

/* MOBILE */
@media(max-width:420px){
  .products{grid-template-columns:1fr}
}
</style>
</head>

<body>

<!-- NAVBAR -->
<div class="nav">
  <button onclick="history.back()">← Back</button>
  <div class="cart" onclick="goCart()">₹ <span id="total">0</span></div>
</div>

<!-- CATEGORY SLIDER -->
<div class="cat-wrap" id="cats"></div>

<!-- PRODUCTS -->
<div class="products" id="list"></div>

<script>
/* CART */
let cart = JSON.parse(localStorage.getItem("cart")||"[]");

/* CATEGORIES */
const categories = ["All","Shirt","Pant","Saree","Woollen","Coat","Blazer","School"];
let currentCat = new URLSearchParams(location.search).get("cat") || "All";

/* BUILD CATEGORY SLIDER */
cats.innerHTML = categories.map(c=>
  `<div class="cat ${c==currentCat?'active':''}" onclick="filter('${c}')">${c}</div>`
).join("");

function filter(cat){
  currentCat = cat;
  document.querySelectorAll(".cat").forEach(x=>x.classList.remove("active"));
  [...document.querySelectorAll(".cat")].find(x=>x.innerText==cat).classList.add("active");
  render();
}

/* RENDER PRODUCTS */
function render(){
  list.innerHTML="";
  PRODUCTS
    .filter(p=>currentCat=="All" || p.cat==currentCat)
    .forEach(p=>{
      const c = cart.find(i=>i.id==p.id);
      list.innerHTML+=`
        <div class="card">
          <div class="icon">${p.icon}</div>
          <div class="name">${p.name}</div>
          <div class="price">₹${p.price}</div>

          ${!c
            ? `<button class="add" onclick="add(${p.id})">ADD</button>`
            : `<div class="qty">
                 <button onclick="dec(${p.id})">−</button>
                 <b>${c.qty}</b>
                 <button onclick="inc(${p.id})">+</button>
               </div>`
          }
        </div>
      `;
    });
  updateTotal();
}

/* CART FUNCTIONS */
function add(id){
  const p = PRODUCTS.find(x=>x.id==id);
  cart.push({...p,qty:1});
  save();
}
function inc(id){
  cart.find(i=>i.id==id).qty++;
  save();
}
function dec(id){
  const i = cart.findIndex(x=>x.id==id);
  cart[i].qty--;
  if(cart[i].qty==0) cart.splice(i,1);
  save();
}
function save(){
  localStorage.setItem("cart",JSON.stringify(cart));
  render();
}
function updateTotal(){
  let t=0;
  cart.forEach(i=>t+=i.price*i.qty);
  total.innerText=t;
}
function goCart(){
  location.href="cart.html";
}

/* INIT */
render();
</script>

</body>
</html>
