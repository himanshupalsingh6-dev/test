<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Partner Wallet – QuickPress</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family:Arial;
  background:#f4f4f4;
}
.header{
  background:#FFD400;
  padding:16px;
  text-align:center;
  font-size:20px;
  font-weight:900;
}
.wallet{
  background:#fff;
  margin:16px;
  padding:20px;
  border-radius:16px;
  box-shadow:0 6px 14px rgba(0,0,0,.1);
  text-align:center;
}
.amount{
  font-size:32px;
  font-weight:900;
}
.list{
  margin:16px;
}
.card{
  background:#fff;
  padding:14px;
  margin-bottom:10px;
  border-radius:12px;
}
.btn{
  width:90%;
  margin:20px auto;
  display:block;
  padding:12px;
  border:none;
  background:#000;
  color:#fff;
  font-weight:700;
  border-radius:10px;
}
</style>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import {
  getFirestore, doc, getDoc, collection,
  query, where, getDocs
} from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyAWTOu3JBhg3JuZg6snAxhnf_XFhLhLkbc",
  authDomain: "quickpress-web.firebaseapp.com",
  projectId: "quickpress-web"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const email = localStorage.getItem("partnerEmail");
if(!email) location.href="partner-login.html";

document.getElementById("email")?.innerText=email;

// Load wallet
const walletRef = doc(db,"partnerWallet",email);
const walletSnap = await getDoc(walletRef);

if(walletSnap.exists()){
  document.getElementById("balance").innerText =
    "₹" + walletSnap.data().balance;
}else{
  document.getElementById("balance").innerText = "₹0";
}

// Load payout history
const q = query(
  collection(db,"payouts"),
  where("partnerEmail","==",email)
);

const snap = await getDocs(q);
const box = document.getElementById("history");

snap.forEach(d=>{
  const p=d.data();
  box.innerHTML += `
    <div class="card">
      ₹${p.amount}<br>
      Status: ${p.status}
    </div>
  `;
});
</script>
</head>

<body>

<div class="header">Partner Wallet</div>

<div class="wallet">
  <div>Total Balance</div>
  <div class="amount" id="balance">₹0</div>
</div>

<div class="list" id="history"></div>

<button class="btn" onclick="location.href='partner-dashboard.html'">
Back to Orders
</button>

</body>
</html>
